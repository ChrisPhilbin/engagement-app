<div class="grid grid-cols-1 gap-4 w-full md:w-3/5 ml-auto mr-auto px-6">
  <p *ngIf="!editMode" class="my-2 font-bold text-3xl">New employee record</p>
  <p *ngIf="editMode && !isLoading" class="my-2 font-bold text-3xl">
    Editing {{ employee.firstName + " " + employee.lastName }}
  </p>
  <form
    [formGroup]="employeeForm"
    (ngSubmit)="onSubmit()"
    *ngIf="!isLoading; else loading"
    class="w-full"
  >
    <div class="grid md:grid-cols-2 md:gap-6">
      <div class="relative z-0 w-full mb-6 group">
        <input
          formControlName="firstName"
          type="text"
          id="firstName"
          class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer"
          placeholder=" "
          required
        />
        <label
          for="firstName"
          class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
          >First name</label
        >
      </div>
      <div class="relative z-0 w-full mb-6 group">
        <input
          formControlName="lastName"
          type="text"
          id="lastName"
          class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer"
          placeholder=" "
          required
        />
        <label
          for="lastName"
          class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
          >Last name</label
        >
      </div>
    </div>

    <div class="grid md:grid-cols-2 md:gap-6">
      <div class="relative z-0 w-full mb-6 group">
        <input
          formControlName="email"
          type="email"
          id="email"
          class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer"
          placeholder=" "
        />
        <label
          for="emailAddress"
          class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
          >Email address</label
        >
      </div>
      <div class="relative z-0 w-full mb-6 group"></div>
    </div>

    <div class="grid md:grid-cols-2 md:gap-6">
      <div class="relative z-0 w-full mb-6 group">
        <input
          formControlName="profilePictureUrl"
          type="url"
          id="profilePictureUrl"
          class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer"
          placeholder=" "
        />
        <label
          for="profilePictureUrl"
          class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
          >Profile picture URL</label
        >
      </div>
      <div class="relative z-0 w-full mb-6 group">
        <input
          (change)="uploadProfilePicture($event)"
          formControlName="profilePictureFile"
          type="file"
          id="profilePictureFile"
          class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer"
          placeholder=" "
        />
        <label
          for="profilePictureFile"
          class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
          >Upload profile picture</label
        >
      </div>
    </div>

    <div class="grid md:grid-cols-2 md:gap-6">
      <div class="relative z-0 w-full mb-6 group">
        <input
          formControlName="facebookUrl"
          type="url"
          id="facebookUrl"
          class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer"
          placeholder=" "
        />
        <label
          for="facebookUrl"
          class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
          >Facebook Profile</label
        >
      </div>
      <div class="relative z-0 w-full mb-6 group">
        <input
          formControlName="linkedInUrl"
          type="url"
          id="linkedInUrl"
          class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer"
          placeholder=" "
        />
        <label
          for="linkedInUrl"
          class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
          >LinkedIn Profile</label
        >
      </div>
    </div>

    <div class="grid grid-cols-1 w-full my-4"></div>

    <div class="grid md:grid-cols-2 md:gap-6">
      <div class="relative z-0 w-full mb-6 group">
        <input
          type="date"
          id="hireDate"
          formControlName="hireDate"
          class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer"
        />
        <label
          for="hireDate"
          class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
          >Hire Date</label
        >
      </div>
      <div class="relative z-0 w-full mb-6 group">
        <input
          type="date"
          id="birthDate"
          formControlName="birthDate"
          class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer"
        />
        <label
          for="birthDate"
          class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
          >Birth Date</label
        >
      </div>
    </div>

    <div class="grid md:grid-cols-2 md:gap-6">
      <div class="relative z-0 w-full mb-6 group">
        <input
          type="date"
          id="lastInteraction"
          formControlName="lastInteraction"
          class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer"
        />
        <label
          for="lastInteraction"
          class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
          >Last interaction</label
        >
      </div>
      <div class="relative z-0 w-full mb-6 group"></div>
    </div>

    <div
      class="grid md:grid-cols-2 md:gap-6 border-b-2 border-emerald-300 mb-6"
    >
      <div class="relative z-0 w-full mb-6 group">
        <p class="font-bold text-gray-900">Interests</p>
      </div>
      <div class="relative z-0 w-full mb-6 group">
        <div formArrayName="interests">
          <span *ngIf="interestControls.length === 0"
            ><p class="italic text-gray-500 text-sm">
              No interests entered.
            </p></span
          >
          <div
            class="flex flex-row align-middle"
            *ngFor="let interestCtrl of interestControls; let i = index"
            [formGroupName]="i"
          >
            <div class="relative w-full mt-3">
              <input
                formControlName="name"
                type="text"
                id="name"
                class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer"
                placeholder=" "
              />
              <label
                for="name"
                class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
                >Interest</label
              >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="absolute h-6 w-6 bottom-2 right-0 inline cursor-pointer text-emerald-700"
                viewBox="0 0 20 20"
                fill="currentColor"
                (click)="onDeleteInterest(i)"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                  clip-rule="evenodd"
                />
              </svg>
            </div>
          </div>
          <div>
            <div>
              <button
                type="button"
                (click)="onAddInterest()"
                class="mt-4 ml-2 px-3 py-2 text-sm font-bold text-center text-white bg-emerald-700 rounded-lg hover:bg-emerald-800 focus:ring-4 focus:outline-none focus:ring-emerald-300 dark:bg-emerald-600 dark:hover:bg-emerald-700 dark:focus:ring-emerald-800"
              >
                Add Interest
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      class="grid md:grid-cols-2 md:gap-6 border-b-2 border-emerald-300 mb-6"
    >
      <div class="relative z-0 w-full mb-6 group">
        <p class="font-bold text-gray-900">Relationships</p>
      </div>
      <div class="relative z-0 w-full mb-6 group">
        <div formArrayName="relations">
          <span *ngIf="relationControls.length === 0"
            ><p class="italic text-gray-500 text-sm">
              No relationships defined yet.
            </p></span
          >
          <div
            class="w-full flex flex-row align-middle"
            *ngFor="let relationCtrl of relationControls; let i = index"
            [formGroupName]="i"
          >
            <div class="w-full relative">
              <input
                formControlName="name"
                type="text"
                id="name"
                class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer"
                placeholder=" "
              />
              <label
                for="name"
                class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
                >Relative's name</label
              >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6 absolute top-4 right-0 inline cursor-pointer text-emerald-700"
                viewBox="0 0 20 20"
                fill="currentColor"
                (click)="onDeleteRelation(i)"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                  clip-rule="evenodd"
                />
              </svg>
            </div>

            <div class="w-full">
              <select formControlName="type" class="w-full border-2 m-2 p-3">
                <option *ngFor="let rel of relations" [value]="rel">
                  {{ rel | titlecase }}
                </option>
              </select>
            </div>
          </div>
          <div>
            <div>
              <button
                type="button"
                (click)="onAddRelation()"
                class="mt-4 ml-2 px-3 py-2 text-sm font-bold text-center text-white bg-emerald-700 rounded-lg hover:bg-emerald-800 focus:ring-4 focus:outline-none focus:ring-emerald-300 dark:bg-emerald-600 dark:hover:bg-emerald-700 dark:focus:ring-emerald-800"
              >
                Add Relationship
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="grid md:grid-cols-2 md:gap-6">
      <div class="relative z-0 w-full mb-6 group">
        <p class="font-bold text-gray-900">Favorite sports teams</p>
      </div>
      <div class="relative z-0 w-full mb-6 group">
        <div formArrayName="sportsTeams">
          <span *ngIf="sportsTeamControls.length === 0"
            ><p class="italic text-gray-500 text-sm">
              No favorite sports teams yet.
            </p></span
          >
          <div
            class="w-full flex flex-row align-middle"
            *ngFor="let teamCtrl of sportsTeamControls; let i = index"
            [formGroupName]="i"
          >
            <div class="w-full relative mt-3">
              <input
                formControlName="teamName"
                type="text"
                id="teamName"
                class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer"
                placeholder=" "
              />
              <label
                for="teamName"
                class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
                >Team name</label
              >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6 absolute top-4 right-0 inline cursor-pointer text-emerald-700"
                viewBox="0 0 20 20"
                fill="currentColor"
                (click)="onDeleteSportsTeam(i)"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                  clip-rule="evenodd"
                />
              </svg>
            </div>
          </div>
          <div>
            <div>
              <button
                type="button"
                (click)="onAddSportsTeam()"
                class="mt-4 ml-2 px-3 py-2 text-sm font-bold text-center text-white bg-emerald-700 rounded-lg hover:bg-emerald-800 focus:ring-4 focus:outline-none focus:ring-emerald-300 dark:bg-emerald-600 dark:hover:bg-emerald-700 dark:focus:ring-emerald-800"
              >
                Add Team
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="my-4">
      <button
        type="submit"
        [disabled]="employeeForm.invalid"
        class="p-4 mr-4 bg-emerald-700 hover:bg-emerald-800 rounded-lg font-bold text-white"
        [ngClass]="
          employeeForm.invalid ? 'cursor-not-allowed' : 'cursor-pointer'
        "
      >
        Save
      </button>
      <button
        *ngIf="editMode"
        type="button"
        (click)="resetFormToInitialValues()"
        class="p-4 mr-4 bg-gray-600 hover:bg-gray-400 rounded-lg font-bold text-white"
      >
        Reset
      </button>
      <button
        type="button"
        (click)="cancelEntry()"
        class="p-4 mr-4 bg-red-600 hover:bg-red-400 rounded-lg font-bold text-white"
      >
        Cancel
      </button>
    </div>
  </form>
  <ng-template #loading>
    <app-loading></app-loading>
  </ng-template>
</div>
